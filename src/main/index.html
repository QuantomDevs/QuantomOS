<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Quantom Cloud">
    <link rel="apple-touch-icon" href="/shared/images/favicon/favicon-512x512.png">
    <title>QuantomOS</title>
    <link rel="stylesheet" href="/main/css/index.css">
    <link rel="icon" href="/shared/images/favicon/favicon.ico" type="image/png">
    <link rel="manifest" href="/shared/config/manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="background-overlay"></div>
    <div class="container">
        <header class="header">
            <img src="/shared/images/favicon/favicon-nobackground.png" alt="Quantom Logo" class="logo">
            <div class="widget-container" data-widget-id="greeting">
                <h1 id="greeting"></h1>
            </div>
        </header>

        <div class="widget-container" data-widget-id="clock">
            <div class="datetime-display">
                <div id="date-display"></div>
                <div id="time-display"></div>
            </div>
        </div>

        <!-- New Layout 2 Hero Section -->
        <section class="layout-2-hero-section hidden-layout" id="layout-2-hero-section">
            <div class="layout-2-hero-content">
                <div class="layout-2-hero-text">
                    <h1>
                        <span class="accent-text-quantom">QuantomOS</span><br>
                        <span id="layout-2-greeting"></span>
                    </h1>
                    <div class="datetime-display-layout-2">
                        <div id="time-display-layout-2"></div>
                    </div>
                </div>
                <div class="layout-2-hero-image">
                    <img src="/shared/images/favicon/favicon.png" alt="Quantom Logo Large">
                </div>
            </div>
        </section>

        <!-- Layout 3 Header Section -->
        <section class="layout-3-header-section hidden-layout" id="layout-3-header-section">
            <div class="layout-3-header-content">
                <div class="layout-3-logo-title">
                    <img src="/shared/images/favicon/favicon-nobackground.png" alt="Quantom Logo" class="layout-3-logo">
                    <span class="accent-text-quantom">QuantomOS</span>
                </div>
                <div class="layout-3-greeting" id="layout-3-greeting-container">
                    <span id="layout-3-greeting"></span>
                </div>
                <!-- Layout 3 Terminal Search Bar -->
                <div class="layout-3-search-container" id="layout-3-search-container">
                    <!-- Terminal Search Container -->
                    <div class="terminal-search-container">
                        <div class="terminal-search-wrapper">
                            <span class="terminal-prompt">></span>
                            <input
                                type="text"
                                class="terminal-search-input"
                                id="layout-3-search-input"
                                placeholder="Search with Google or enter address"
                                autocomplete="off"
                            >
                            <button class="terminal-clear-btn" id="layout-3-clear-search" style="display: none;">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18"></line>
                                    <line x1="6" y1="6" x2="18" y2="18"></line>
                                </svg>
                            </button>
                            <div class="search-icon-end">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <path d="m21 21-4.35-4.35"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>


        <section class="app-launcher">
            <div class="app-grid" id="app-grid">
                <!-- Apps werden hier von JavaScript eingefügt -->
            </div>
            <!-- Backend Status Info Box -->
            <div class="backend-status-box" id="backend-status-box" style="display: none;">
                <div class="backend-status-icon">⚠️</div>
                <div class="backend-status-content">
                    <h3>Backend nicht erreichbar</h3>
                    <p>Die Verbindung zum Server konnte nicht hergestellt werden. Apps können nicht geladen werden.</p>
                </div>
            </div>
        </section>
    </div>

    <nav class="dock">
        <div class="dock-content">
            <button class="dock-button" id="home-button">
                <img src="/shared/images/dock/dock-home.png" alt="Home">
                <div class="selection-indicator"></div>
            </button>
            <button class="dock-button" id="app-store-button">
                <img src="/shared/images/dock/dock-app-store.png" alt="App Store">
                <div class="selection-indicator"></div>
            </button>
            <button class="dock-button" id="settings-button">
                <img src="/shared/images/dock/dock-settings.png" alt="Settings">
                <div class="selection-indicator"></div>
            </button>
            <button class="dock-button" id="airbus-button">
                <img src="/shared/images/dock/dock-airbus.jpg" alt="Airbus">
                <div class="selection-indicator"></div>
            </button>
            <button class="dock-button" id="link-button">
                <img src="/shared/images/dock/dock-link.png" alt="Create Link">
                <div class="selection-indicator"></div>
            </button>
            <button class="dock-button" id="files-button">
                <img src="/shared/images/dock/dock-files.png" alt="Files">
                <div class="selection-indicator"></div>
            </button>
        </div>
    </nav>

    <div class="settings-popup" id="settings-popup">
        <div class="settings-header">
            <h2>Einstellungen</h2>
            <button class="close-button" id="close-settings-popup">
                <svg class="close-icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
        </div>
        <div class="settings-content">
            <div class="settings-left-panel">
                <div class="device-control-box">
                    <div class="device-info">
                        <h3>Snenjih´s Quantom</h3>
                        <p>Device: Raspberry PI 5 8gb RAM</p>
                        <p>QuantomOS: quantomOS 1.0.2</p>
                        <p>Local IP: <span id="local-ip"></span></p>
                    </div>
                    <div class="control-buttons">
                        <button class="control-button">Update</button>
                        <button class="control-button">Restart</button>
                        <button class="control-button">Shutdown</button>
                    </div>
                </div>
                <div class="info-box">
                    <h3>Raspberry PI 5 - Quantom Cloud</h3>
                    <p>192.168.178.37:80 -> 192.168.178.37:8080</p>
                    <p>192.168.178.37:7770 -> 192.168.178.37:7770</p>
                    <p>192.168.178.37:4080 -> 192.168.178.37:4080</p>
                    <p>192.168.178.37:3670 -> 192.168.178.37:3670</p>
                    <p>192.168.178.37:22 -> 192.168.178.37:8282</p>
                </div>
                <div class="info-box">
                    <h3>Extern Domain</h3>
                    <p id="external-domain-text" style="cursor: pointer;">8s8982nmzl16zprp.myfritz.net</p>
                </div>
            </div>
            <div class="settings-right-panel">
                
                <div class="settings-options-box">
                    <div class="settings-category">
                        <h3>Layout & Wallpaper</h3>
                        <div class="setting-item">
                            <span>Layout auswählen</span>
                            <div class="layout-options">
                                <label class="radio-button">
                                    <input type="radio" name="layout-selection" value="layout1" id="layout-radio-1">
                                    <span class="radio-custom"></span>
                                    Layout 1
                                </label>
                                <label class="radio-button">
                                    <input type="radio" name="layout-selection" value="layout2" id="layout-radio-2">
                                    <span class="radio-custom"></span>
                                    Layout 2
                                </label>
                                <label class="radio-button">
                                    <input type="radio" name="layout-selection" value="layout3" id="layout-radio-3">
                                    <span class="radio-custom"></span>
                                    Layout 3
                                </label>
                            </div>
                        </div>
                        <div class="setting-item wallpaper-setting">
                            <span>Wallpaper</span>
                            <div class="wallpaper-thumbnails" id="wallpaper-thumbnails">
                                <!-- Wallpaper-Miniaturansichten werden hier von JavaScript eingefügt -->
                            </div>
                        </div>
                        <div class="setting-item">
                            <span>Blur Wallpaper</span>
                            <label class="switch">
                                <input type="checkbox" id="toggle-wallpaper-blur">
                                <span class="slider round"></span>
                            </label>
                        </div>
                    </div>
                    <div class="divider"></div>
                    <div class="settings-category">
                        <h3>App Grid</h3>
                        <div class="setting-item">
                            <span>App Grid Größe</span>
                            <div class="custom-dropdown" id="app-grid-size-dropdown">
                                <div class="selected-item" id="selected-app-grid-size">6</div>
                                <div class="dropdown-content" id="app-grid-size-options">
                                    <div class="dropdown-option" data-value="4">4</div>
                                    <div class="dropdown-option" data-value="5">5</div>
                                    <div class="dropdown-option" data-value="6">6</div>
                                    <div class="dropdown-option" data-value="7">7</div>
                                    <div class="dropdown-option" data-value="8">8</div>
                                    <div class="dropdown-option" data-value="9">9</div>
                                    <div class="dropdown-option" data-value="10">10</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="divider"></div>
                    <div class="settings-category">
                        <h3>Widgets</h3>
                        <div class="setting-item">
                            <span>Greeting Widget</span>
                            <label class="switch">
                                <input type="checkbox" id="toggle-greeting" data-widget-id="greeting">
                                <span class="slider round"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <span>Clock Widget</span>
                            <label class="switch">
                                <input type="checkbox" id="toggle-clock" data-widget-id="clock">
                                <span class="slider round"></span>
                            </label>
                        </div>
                    </div>
                    <div class="divider"></div>
                    <div class="settings-category">
                        <h3>Quick Actions</h3>
                        <div class="setting-item">
                            <span>Display Create Link Button on Homescreen</span>
                            <label class="switch">
                                <input type="checkbox" id="toggle-create-link-button">
                                <span class="slider round"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="app-store-popup" id="app-store-popup">
        <div class="app-store-header">
            <h2>App Store</h2>
            <button class="close-button" id="close-app-store-popup">
                <svg class="close-icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
        </div>
        <div class="app-store-content">
            <div class="app-store-top-bar">
                <!-- App Store Search Container -->
                <div class="app-store-search-container">
                    <div class="terminal-search-container">
                        <div class="terminal-search-wrapper">
                            <span class="terminal-prompt">></span>
                            <input
                                type="text"
                                class="terminal-search-input"
                                id="app-store-search-input"
                                placeholder="Search commands..."
                                autocomplete="off"
                            >
                            <button class="terminal-clear-btn" id="app-store-clear-search" style="display: none;">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="18" y1="6" x2="6" y2="18"></line>
                                    <line x1="6" y1="6" x2="18" y2="18"></line>
                                </svg>
                            </button>
                            <div class="search-icon-end">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="11" cy="11" r="8"></circle>
                                    <path d="m21 21-4.35-4.35"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="app-store-category-buttons" id="app-store-category-buttons">
                    <!-- Category buttons will be dynamically inserted here -->
                </div>
            </div>
            <div class="app-store-main-content">
                <div class="app-store-left-panel">
                    <button class="action-button" id="app-store-select-all-toggle-btn">Alle auswählen / Alle abwählen</button>
                    <div class="app-store-command-list" id="app-store-command-list">
                        <!-- Command buttons will be dynamically inserted here -->
                    </div>
                </div>
                <div class="app-store-right-panel">
                    <div class="app-store-preview-header">
                        <h3>Live Preview</h3>
                        <div class="app-store-preview-actions">
                            <button class="action-button" id="app-store-copy-button">
                                <svg class="copy-icon" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path></svg>
                                Copy
                            </button>
                            <button class="action-button" id="app-store-download-button">
                                <svg class="download-icon" viewBox="0 0 24 24"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"></path></svg>
                                Download
                            </button>
                        </div>
                    </div>
                    <pre id="app-store-live-preview" class="code-block"></pre>
                </div>
            </div>
        </div>
    </div>

    <div class="airbus-popup" id="airbus-popup">
        <div class="airbus-header">
            <h2>Airbus Apps</h2>
            <button class="close-button" id="close-airbus-popup">
                <svg class="close-icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
        </div>
        <div class="airbus-content">
            <div class="app-grid airbus-app-grid" id="airbus-app-grid">
                <!-- Airbus Apps werden hier von JavaScript eingefügt -->
            </div>
        </div>
    </div>

    <div class="create-link-popup" id="create-link-popup">
        <div class="create-link-content">
            <div class="create-link-header">
                <h2 id="create-link-title">Links > New Link</h2>
                <button class="close-button" id="close-create-link-popup">
                    <svg class="close-icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>

            <!-- View 1: Create/Edit Link Form -->
            <div class="create-link-view" id="create-link-form-view">
                <div class="form-main-section">
                    <div class="form-left">
                        <div class="form-group">
                            <label for="link-name">Link Name <span class="info-tooltip" title="Der Name, der für diesen Link angezeigt wird.">?</span></label>
                            <input type="text" id="link-name" placeholder="z.B. Mein Lieblingsblog">
                        </div>
                        <div class="form-group">
                            <label for="link-destination">Destination URL <span class="info-tooltip" title="Die vollständige URL, zu der dieser Link weiterleiten soll.">?</span></label>
                            <input type="url" id="link-destination" placeholder="https://example.com/subdomain-here">
                        </div>
                         <div class="form-group">
                            <label for="link-id">ID <span class="info-tooltip" title="Eine eindeutige Nummer zur Sortierung der Links.">?</span></label>
                            <input type="number" id="link-id" placeholder="z.B. 13">
                        </div>
                    </div>
                    <div class="form-right">
                        <div class="form-group">
                            <label for="link-folder">Folder <span class="info-tooltip" title="Wähle den Ordner, in dem dieser Link gespeichert werden soll.">?</span></label>
                            <select id="link-folder">
                                <!-- Folder options will be populated by JS -->
                            </select>
                        </div>
                         <div class="form-group">
                            <label for="icon-upload-area">Icon <span class="info-tooltip" title="Lade ein Icon für diesen Link hoch (WebP, JPEG, JPG, PNG).">?</span></label>
                            <div id="icon-upload-area" class="icon-upload-area">
                                <img id="icon-preview" src="" alt="Icon Preview" style="display: none;">
                                <span id="upload-placeholder" class="upload-placeholder">Hier hochladen</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-divider"></div>
                <div class="form-footer">
                    <div class="footer-buttons-left">
                        <button class="footer-button" id="create-folder-button">Create Folder</button>
                        <button class="footer-button" id="all-links-button">All Links</button>
                    </div>
                    <div class="footer-buttons-right">
                        <button class="footer-button" id="create-link-action-button">Create Link</button>
                        <button class="footer-button" id="save-link-action-button" style="display: none;">Save Changes</button>
                    </div>
                </div>
            </div>

            <!-- View 2: All Links List -->
            <div class="create-link-view" id="all-links-list-view" style="display: none;">
                <div class="all-links-list" id="all-links-list">
                    <!-- Link items will be populated by JS -->
                </div>
                 <div class="form-divider"></div>
                 <div class="form-footer">
                    <div class="footer-buttons-left">
                         <button class="footer-button" id="back-to-create-link-button">Back to Create</button>
                    </div>
                </div>
            </div>

            <!-- View 3: Create Folder Form -->
            <div class="create-link-view" id="create-folder-form-view" style="display: none;">
                <div class="form-main-section">
                    <div class="form-left">
                        <div class="form-group">
                            <label for="folder-name">Folder Name <span class="info-tooltip" title="Der Name des Ordners.">?</span></label>
                            <input type="text" id="folder-name" placeholder="z.B. Work Apps">
                        </div>
                        <div class="form-group">
                            <label for="folder-id">ID <span class="info-tooltip" title="Eine eindeutige Nummer für diesen Ordner.">?</span></label>
                            <input type="number" id="folder-id" placeholder="z.B. 3">
                        </div>
                    </div>
                    <div class="form-right">
                        <div class="form-group">
                            <label for="folder-icon-upload-area">Icon <span class="info-tooltip" title="Lade ein Icon für diesen Ordner hoch (WebP, JPEG, JPG, PNG).">?</span></label>
                            <div id="folder-icon-upload-area" class="icon-upload-area">
                                <img id="folder-icon-preview" src="" alt="Icon Preview" style="display: none;">
                                <span id="folder-upload-placeholder" class="upload-placeholder">Hier hochladen</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="folder-display-in-dock">
                                    <span class="checkbox-custom"></span>
                                    Display in Dock
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" id="folder-display-on-home">
                                    <span class="checkbox-custom"></span>
                                    Display on Home
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-divider"></div>
                <div class="form-footer">
                    <div class="footer-buttons-left">
                        <button class="footer-button" id="back-from-folder-button">Back</button>
                    </div>
                    <div class="footer-buttons-right">
                        <button class="footer-button" id="create-folder-action-button">Create Folder</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="folder-popup" id="folder-popup">
        <div class="folder-popup-header">
            <h2 id="folder-popup-title"></h2>
            <button class="close-button" id="close-folder-popup">
                <svg class="close-icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
        </div>
        <div class="folder-popup-content">
            <div class="app-grid" id="folder-popup-app-grid">
                <!-- Apps of the folder will be inserted here by JS -->
            </div>
        </div>
    </div>

    <div id="notification-container"></div>
    <script src="/shared/js/notification.js"></script>
    <script src="/main/js/app-store.js"></script>
    <script src="/main/js/index.js"></script>
</body>
</html>
